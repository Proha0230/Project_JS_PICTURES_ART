(()=>{"use strict";const e=(e,t,n,l)=>{let o=1,s=!1;const c=document.querySelectorAll(e);function a(e){e>c.length&&(o=1),e<1&&(o=c.length),c.forEach((e=>{e.classList.add("animated"),e.style.display="none"})),c[o-1].style.display="block"}function r(e){a(o+=e)}a(o);try{const e=document.querySelector(n),t=document.querySelector(l);e.addEventListener("click",(()=>{r(-1),c[o-1].classList.remove("slideInRight"),c[o-1].classList.add("slideInLeft")})),t.addEventListener("click",(()=>{r(1),c[o-1].classList.remove("slideInLeft"),c[o-1].classList.add("slideInRight")}))}catch(e){}function i(){s="vertical"===t?setInterval((function(){r(1),c[o-1].classList.add("slideInDown")}),3e3):setInterval((function(){r(1),c[o-1].classList.remove("slideInLeft"),c[o-1].classList.add("slideInRight")}),3e3)}i(),c[0].parentNode.addEventListener("mouseenter",(()=>{clearInterval(s)})),c[0].parentNode.addEventListener("mouseleave",(()=>{i()}))},t=e=>{function t(e){let t="+7(___)___-__-__",n=0,l=t.replace(/\D/g,""),o=this.value.replace(/\D/g,"");l.length>=o.length&&(o=l),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&n<o.length?o.charAt(n++):n>=o.length?"":e})),"blur"===e.type&&2==this.value.length&&(this.value="")}document.querySelectorAll(e).forEach((e=>{e.setAttribute("autocomplete","off"),e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)}))},n=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(function(){this.classList.toggle("active-style"),this.nextElementSibling.classList.toggle("active-content"),this.classList.contains("active-style")?this.nextElementSibling.style.maxHeight=this.nextElementSibling.scrollHeight+80+"px":this.nextElementSibling.style.maxHeight="0px"}))}))},l=e=>{const t=document.querySelector(e);window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>1650?(t.classList.add("animated","fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))})),document.querySelectorAll('[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=document.documentElement.scrollTop,n=this.hash,l=document.querySelector(n).getBoundingClientRect().top,o=null;requestAnimationFrame((function e(s){null===o&&(o=s);let c=s-o,a=l<0?Math.max(t-c/.2,t+l):Math.min(t+c/.2,t+l);document.documentElement.scrollTo(0,a),a!=t+l?requestAnimationFrame(e):location.hash=n}))}))}))};window.addEventListener("DOMContentLoaded",(()=>{var o,s,c;(()=>{let e=!1;function t(t,l,o){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const c=document.querySelectorAll(t),a=document.querySelector(l),r=document.querySelector(o),i=document.querySelectorAll("[data-modal]"),d=n();c.forEach((t=>{t.addEventListener("click",(n=>{n.target&&n.preventDefault(),e=!0,s&&t.remove(),a.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${d}px`}))})),i.forEach((e=>{e.style.display="none",e.classList.add("animated","fadeIn")})),r.addEventListener("click",(()=>{i.forEach((e=>{e.style.display="none"})),a.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"})),a.addEventListener("click",(e=>{e.target===a&&(i.forEach((e=>{e.style.display="none"})),a.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")}))}function n(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}t(".button-design",".popup-design",".popup-design .popup-close"),t(".button-consultation",".popup-consultation",".popup-consultation .popup-close"),t(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0),setTimeout((function(){let e;document.querySelectorAll("[data-modal]").forEach((t=>{"none"!==getComputedStyle(t).display&&(e="block")})),e||(document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden",scroll=n())}),6e4),window.addEventListener("scroll",(()=>{let t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);!e&&window.pageYOffset+document.documentElement.clientHeight>=t&&document.querySelector(".fixed-gift").click()}))})(),e(".feedback-slider-item","horizontal",".main-prev-btn",".main-next-btn"),e(".main-slider-item","vertical"),(()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("input"),n=document.querySelectorAll('[name="upload"]');n.forEach((e=>{e.addEventListener("input",(()=>{let t;console.log(e.files[0]);const n=e.files[0].name.split(".");t=n[0].length>6?"...":".";const l=n[0].substring(0,6)+t+n[1];e.previousElementSibling.textContent=l}))})),e.forEach((e=>{e.addEventListener("submit",(l=>{l.preventDefault();let o=document.createElement("div");o.classList.add("status"),e.parentNode.appendChild(o),e.classList.add("animated","fadeOutUp"),setTimeout((()=>{e.style.display="none"}),400);let s=document.createElement("img");s.setAttribute("src","assets/img/spinner.gif"),s.classList.add("animated","fadeInUp"),o.appendChild(s);let c=document.createElement("div");c.textContent="Загрузка...",o.appendChild(c);const a=new FormData(e);let r;r=e.closest(".popup-design")||e.classList.contains("calc-form")?"assets/server.php":"assets/question.php",console.log(r),(async(e,t)=>{let n=await fetch(e,{method:"POST",body:t});return await n.text()})(r,a).then((e=>{console.log(e),s.setAttribute("src","assets/img/ok.png"),c.textContent="Спасибо! Скоро мы c вами свяжемся"})).catch((()=>{s.setAttribute("src","assets/img/fail.png"),c.textContent="Что-то пошло не так..."})).finally((()=>{t.forEach((e=>{e.value=""})),n.forEach((e=>{e.previousElementSibling.textContent="Файл не выбран"})),setTimeout((()=>{o.remove(),e.style.display="block",e.classList.remove("fadeOutUp"),e.classList.add("fadeInUp")}),5e3)}))}))}))})(),t('[name="phone"]'),((e,t,n)=>{const l=document.querySelectorAll(e),o=document.querySelectorAll(t),s=document.querySelectorAll(n);l.forEach((e=>{e.setAttribute("autocomplete","off"),e.addEventListener("keypress",(function(e){e.key.match(/[^а-яё 0-9 .,:&(+=!"?)*%-]/gi)&&e.preventDefault()}))})),o.forEach((e=>{e.setAttribute("autocomplete","off"),e.addEventListener("keypress",(function(e){e.key.match(/[^а-яё]/gi)&&e.preventDefault()}))})),s.forEach((e=>{e.setAttribute("autocomplete","off"),e.addEventListener("keypress",(function(e){e.key.match(/[^A-Za-z0-9.@]/gi)&&e.preventDefault()}))}))})('[name="message"]','[name="name"]','[name="email"]'),s=".button-styles",c="#styles .row",document.querySelector(s).addEventListener("click",(function(){(async e=>{let t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("http://localhost:3000/styles").then((e=>{e.forEach((e=>{let t=document.createElement("div");t.classList.add("animated","fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1"),t.innerHTML=`\n<div class="styles-block">\n    <img src=${e.src} alt="style">\n    <h4>${e.title}</h4>\n    <a href=${e.link}>Подробнее</a>\n</div>\n`,document.querySelector(c).appendChild(t)}))})).catch((e=>console.log(e)))})),((e,t,n,l,o)=>{const s=document.querySelector(e),c=document.querySelector(t),a=document.querySelector(n),r=document.querySelector(l),i=document.querySelector(o);let d=0;const u=()=>{d=Math.round(+s.value*+c.value+ +a.value),""==s.value||""==c.value?i.textContent="Пожалуйста, выберите размер и материал картины":"IWANTPOPART"===r.value?i.textContent=Math.round(.7*d):i.textContent=d};s.addEventListener("change",u),c.addEventListener("change",u),a.addEventListener("change",u),r.addEventListener("change",u)})("#size","#material","#options",".promocode",".calc-price"),(()=>{const e=document.querySelector(".portfolio-menu"),t=e.querySelectorAll("li"),n=e.querySelector(".all"),l=e.querySelector(".lovers"),o=e.querySelector(".chef"),s=e.querySelector(".girl"),c=e.querySelector(".guy"),a=e.querySelector(".grandmother"),r=e.querySelector(".granddad"),i=document.querySelector(".portfolio-wrapper"),d=i.querySelectorAll(".all"),u=i.querySelectorAll(".girl"),m=i.querySelectorAll(".lovers"),p=i.querySelectorAll(".chef"),y=i.querySelectorAll(".guy"),f=document.querySelector(".portfolio-no"),h=e=>{d.forEach((e=>{e.style.display="none",e.classList.remove("animated","fadeIn")})),f.style.display="none",f.classList.remove("animated","fadeIn"),e?e.forEach((e=>{e.style.display="block",e.classList.add("animated","fadeIn")})):(f.style.display="block",f.classList.add="fadeIn")};n.addEventListener("click",(()=>{h(d)})),l.addEventListener("click",(()=>{h(m)})),o.addEventListener("click",(()=>{h(p)})),c.addEventListener("click",(()=>{h(y)})),s.addEventListener("click",(()=>{h(u)})),a.addEventListener("click",(()=>{h()})),r.addEventListener("click",(()=>{h()})),e.addEventListener("click",(e=>{let n=e.target;n&&"LI"==n.tagName&&(t.forEach((e=>e.classList.remove("active"))),n.classList.add("active"))}))})(),o=".sizes-block",document.querySelectorAll(o).forEach((e=>{e.addEventListener("mouseover",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="none"}))}(e)})),e.addEventListener("mouseout",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="block"}))}(e)}))})),n(".accordion-heading"),((e,t)=>{const n=document.querySelector(e),l=document.querySelector(t);n.style.display="none",l.addEventListener("click",(()=>{"none"==n.style.display&&window.screen.availWidth<993?n.style.display="block":n.style.display="none"})),window.addEventListener("resize",(()=>{window.screen.availWidth>992&&(n.style.display="none")}))})(".burger-menu",".burger"),l(".pageup"),(()=>{const e=document.querySelectorAll('[name="upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragleave","dragover","drop"].forEach((n=>{e.forEach((e=>{e.addEventListener(n,t,!1)}))})),["dragleave","drop"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{return(t=e).closest(".file_upload").style.border="none",void(t.closest(".calc_form")?t.closest(".file_upload").style.backgroundColor="#fff":t.closest(".file_upload").style.backgroundColor="#ededed");var t}),!1)}))})),["dragenter","dropover"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{return(t=e).closest(".file_upload").style.border="5px solid yellow",void(t.closest(".file_upload").style.backgroundColor="rgba (0,0,0 .7)");var t}),!1)}))})),e.forEach((e=>{e.addEventListener("drop",(t=>{let n;e.files=t.dataTransfer.files;const l=e.files[0].name.split(".");n=l[0].length>6?"...":".";const o=l[0].substring(0,6)+n+l[1];e.previousElementSibling.textContent=o}))}))})()}))})();